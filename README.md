# Math Mentor - AI数学学習プラットフォーム

Math Mentor は、AI と対話しながら数学を学習できるインタラクティブな学習プラットフォームです。微分・積分、確率論、線形代数など、専門的な数学トピックを分かりやすく解説し、クイズや練習問題を通じて理解度を確認できます。

## 目次

1. [概要](#概要)
2. [主な機能](#主な機能)
3. [技術仕様](#技術仕様)
4. [アーキテクチャ](#アーキテクチャ)
5. [データベース設計](#データベース設計)
6. [API エンドポイント](#api-エンドポイント)
7. [セットアップ](#セットアップ)
8. [使用方法](#使用方法)

---

## 概要

Math Mentor は、従来の教科書や動画学習とは異なり、AI との対話を通じて数学を学習できるプラットフォームです。ユーザーは学習したいトピックを入力するだけで、AI が個別のニーズに合わせた説明を提供します。

### 特徴

| 特徴 | 説明 |
|------|------|
| **対話型学習** | AI と会話しながら、疑問点をその場で解決できます |
| **適応型難易度** | 正答率に基づいて、問題の難易度が自動調整されます |
| **リアルタイム成績追跡** | 学習成績がリアルタイムで更新され、進捗を確認できます |
| **ノート機能** | 重要なポイントをメモとして保存できます |
| **テキスト保存** | 学習内容をテキストファイルとしてエクスポートできます |

---

## 主な機能

### 1. AI チャット機能

AI との対話を通じて、数学の概念を学習できます。AI は以下の特徴を持っています。

- 日本語での分かりやすい説明
- 数式を平文で表現（LaTeX 記法を使用しない）
- 段階的な説明と具体例の提示
- 質問への即座の回答

### 2. クイズ機能

学習したトピックに関する4択クイズを生成し、理解度を確認できます。

- 難易度選択（簡単・普通・難しい）
- 3問セットのクイズ生成
- 正誤判定と詳細な解説
- 成績への自動反映

### 3. 練習問題機能

AI が生成する練習問題を解いて、実践的なスキルを身につけます。

- 難易度に応じた問題生成
- ヒント機能
- 解答と解説の提供

### 4. ノート機能

学習中に重要なポイントをメモとして保存できます。

- カテゴリ分類（重要・例・公式など）
- セッションごとのノート管理
- ノートの編集・削除

### 5. 成績追跡機能

学習成績をリアルタイムで追跡し、進捗を可視化します。

- 解いた問題数
- 正解数
- 正答率（パーセンテージ）
- 現在の難易度レベル

---

## 技術仕様

### フロントエンド

| 技術 | バージョン | 用途 |
|------|-----------|------|
| React | 19.x | UI フレームワーク |
| TypeScript | 5.x | 型安全な開発 |
| Tailwind CSS | 4.x | スタイリング |
| shadcn/ui | - | UI コンポーネントライブラリ |
| Wouter | - | ルーティング |
| TanStack Query | - | データフェッチング |
| tRPC | 11.x | 型安全な API 通信 |

### バックエンド

| 技術 | バージョン | 用途 |
|------|-----------|------|
| Node.js | 22.x | ランタイム |
| Express | 4.x | Web フレームワーク |
| tRPC | 11.x | API レイヤー |
| Drizzle ORM | - | データベース ORM |
| MySQL/TiDB | - | データベース |

### AI/LLM

| 技術 | 用途 |
|------|------|
| Manus Built-in LLM API | AI チャット、クイズ生成、練習問題生成 |

### 認証

| 技術 | 用途 |
|------|------|
| Manus OAuth | ユーザー認証 |
| JWT | セッション管理 |

---

## アーキテクチャ

Math Mentor は、モダンなフルスタック Web アプリケーションとして設計されています。

### システム構成図

![Math Mentor アーキテクチャ図](docs/architecture.png)

```
┌─────────────────────────────────────────────────────────────────┐
│                        クライアント層                            │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    React + TypeScript                    │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐    │   │
│  │  │  Home   │  │Learning │  │  Chat   │  │  Notes  │    │   │
│  │  │  Page   │  │  Tabs   │  │   Box   │  │  Panel  │    │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘    │   │
│  │                      ↓                                   │   │
│  │              tRPC Client (型安全な通信)                   │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                         API 層                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                  Express + tRPC Server                   │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐    │   │
│  │  │  Auth   │  │Sessions │  │  Chat   │  │Learning │    │   │
│  │  │ Router  │  │ Router  │  │ Router  │  │ Router  │    │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘    │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                              │
              ┌───────────────┼───────────────┐
              ▼               ▼               ▼
┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐
│   データ層       │  │   外部サービス   │  │   ストレージ     │
│  ┌───────────┐  │  │  ┌───────────┐  │  │  ┌───────────┐  │
│  │  MySQL/   │  │  │  │  Manus    │  │  │  │    S3     │  │
│  │   TiDB    │  │  │  │  LLM API  │  │  │  │  Storage  │  │
│  └───────────┘  │  │  └───────────┘  │  │  └───────────┘  │
└─────────────────┘  └─────────────────┘  └─────────────────┘
```

### データフロー

```
ユーザー入力
     │
     ▼
┌─────────────┐
│ React UI    │ ─────────────────────────────────────┐
└─────────────┘                                       │
     │                                                │
     ▼                                                │
┌─────────────┐                                       │
│ tRPC Client │ ← 型定義を共有 → ┌─────────────┐     │
└─────────────┘                   │ tRPC Server │     │
     │                            └─────────────┘     │
     │                                  │             │
     │ HTTP/JSON                        │             │
     │                                  ▼             │
     │                           ┌─────────────┐      │
     │                           │  LLM API    │      │
     │                           │  (AI 処理)   │      │
     │                           └─────────────┘      │
     │                                  │             │
     │                                  ▼             │
     │                           ┌─────────────┐      │
     └──────────────────────────▶│  Database   │◀─────┘
                                 │  (MySQL)    │
                                 └─────────────┘
```

---

## データベース設計

### ER 図

```
┌─────────────────┐       ┌─────────────────────┐
│     users       │       │  learning_sessions  │
├─────────────────┤       ├─────────────────────┤
│ id (PK)         │       │ id (PK)             │
│ openId          │       │ topic               │
│ name            │       │ description         │
│ email           │       │ createdAt           │
│ loginMethod     │       │ updatedAt           │
│ role            │       └─────────────────────┘
│ createdAt       │                 │
│ updatedAt       │                 │
│ lastSignedIn    │                 │
└─────────────────┘                 │
                                    │
        ┌───────────────────────────┼───────────────────────────┐
        │                           │                           │
        ▼                           ▼                           ▼
┌─────────────────┐       ┌─────────────────┐       ┌─────────────────┐
│   chat_logs     │       │practice_problems│       │    quizzes      │
├─────────────────┤       ├─────────────────┤       ├─────────────────┤
│ id (PK)         │       │ id (PK)         │       │ id (PK)         │
│ sessionId (FK)  │       │ sessionId (FK)  │       │ sessionId (FK)  │
│ sender          │       │ problemText     │       │ question        │
│ content         │       │ solution        │       │ options         │
│ contentType     │       │ difficulty      │       │ correctAnswer   │
│ createdAt       │       │ solved          │       │ explanation     │
└─────────────────┘       │ createdAt       │       │ userAnswer      │
                          └─────────────────┘       │ isCorrect       │
        │                                           │ createdAt       │
        │                                           └─────────────────┘
        │
        ▼
┌─────────────────┐       ┌─────────────────────┐
│ learning_notes  │       │ session_performance │
├─────────────────┤       ├─────────────────────┤
│ id (PK)         │       │ id (PK)             │
│ sessionId (FK)  │       │ sessionId (FK)      │
│ noteText        │       │ totalProblems       │
│ category        │       │ correctAnswers      │
│ createdAt       │       │ accuracyRate        │
│ updatedAt       │       │ currentDifficulty   │
└─────────────────┘       │ lastUpdated         │
                          └─────────────────────┘
```

### テーブル詳細

| テーブル名 | 説明 |
|-----------|------|
| `users` | ユーザー情報（OAuth 認証） |
| `learning_sessions` | 学習セッション（トピックごと） |
| `chat_logs` | AI との会話履歴 |
| `practice_problems` | 練習問題 |
| `quizzes` | クイズ問題と回答 |
| `learning_notes` | ユーザーのノート |
| `session_performance` | セッションごとの成績 |

---

## API エンドポイント

### 認証 (auth)

| エンドポイント | メソッド | 説明 |
|---------------|---------|------|
| `auth.me` | Query | 現在のユーザー情報を取得 |
| `auth.logout` | Mutation | ログアウト |

### セッション (sessions)

| エンドポイント | メソッド | 説明 |
|---------------|---------|------|
| `sessions.create` | Mutation | 新しい学習セッションを作成 |
| `sessions.get` | Query | セッション情報を取得 |
| `sessions.list` | Query | セッション一覧を取得 |

### チャット (chat)

| エンドポイント | メソッド | 説明 |
|---------------|---------|------|
| `chat.sendMessage` | Mutation | AI にメッセージを送信 |
| `chat.getHistory` | Query | 会話履歴を取得 |
| `chat.evaluateAnswer` | Mutation | 回答を評価 |

### 学習 (learning)

| エンドポイント | メソッド | 説明 |
|---------------|---------|------|
| `learning.generatePractice` | Mutation | 練習問題を生成 |
| `learning.generateQuiz` | Mutation | クイズを生成 |
| `learning.submitQuizAnswer` | Mutation | クイズの回答を送信 |
| `learning.getNotes` | Query | ノートを取得 |
| `learning.saveNote` | Mutation | ノートを保存 |
| `learning.deleteNote` | Mutation | ノートを削除 |
| `learning.getSessionPerformance` | Query | 成績を取得 |
| `learning.updateSessionPerformance` | Mutation | 成績を更新 |

---

## セットアップ

### 必要条件

- Node.js 22.x 以上
- pnpm パッケージマネージャー
- MySQL または TiDB データベース

### インストール

```bash
# リポジトリをクローン
git clone <repository-url>
cd economentor

# 依存関係をインストール
pnpm install

# 環境変数を設定
cp .env.example .env
# .env ファイルを編集して必要な値を設定

# データベースをセットアップ
pnpm db:push

# 開発サーバーを起動
pnpm dev
```

### 環境変数

| 変数名 | 説明 |
|--------|------|
| `DATABASE_URL` | MySQL/TiDB 接続文字列 |
| `JWT_SECRET` | JWT 署名用シークレット |
| `VITE_APP_ID` | Manus OAuth アプリケーション ID |
| `OAUTH_SERVER_URL` | Manus OAuth サーバー URL |
| `BUILT_IN_FORGE_API_URL` | Manus LLM API URL |
| `BUILT_IN_FORGE_API_KEY` | Manus LLM API キー |

---

## 使用方法

### 1. 学習を開始する

1. トップページで学習したいトピック（例：「微分」「確率論」）を入力
2. 「学習を開始」ボタンをクリック
3. AI が選択したトピックについて詳しく説明します

### 2. クイズに挑戦する

1. 「クイズ」タブを選択
2. 難易度を選択（簡単・普通・難しい）
3. 「クイズを生成」ボタンをクリック
4. 4択問題に回答し、チャット欄で送信

### 3. 練習問題を解く

1. 「練習」タブを選択
2. 難易度を選択
3. 「練習問題を生成」ボタンをクリック
4. 問題を解いて、チャット欄で回答を送信

### 4. ノートを取る

1. 「ノート」タブを選択
2. 重要なポイントをメモとして入力
3. カテゴリを選択して保存

### 5. 成績を確認する

1. 「成績」タブを選択
2. 解いた問題数、正解数、正答率を確認
3. 現在の難易度レベルを確認

---

## ライセンス

このプロジェクトは Manus プラットフォーム上で開発されています。

---

## 作成者

**Manus AI**

---

## 更新履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|---------|
| 1.0.0 | 2026-01-22 | 初期リリース |
